$(document).ready(function(){

});

var landmarks =
{"type":"FeatureCollection","features":[
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-119.87244814992069,34.417876381005705],[-119.87244715971829,34.41790904617161],[-119.87240777595595,34.417908225060266],[-119.87240876617379,34.41787555989468],[-119.87244814992069,34.417876381005705]]]},"properties":{"BUILDING_N":"701","SHORTNAME":"","LONGNAME":"West Apartment 701"}},
{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-119.85166245955232,34.41060869890611],[-119.85164657071812,34.41053345031254],[-119.85164813227176,34.41053322178798],[-119.85164827261906,34.410503122528404],[-119.85196377347789,34.410456905023075],[-119.8519637821431,34.410553400693864],[-119.85190195743834,34.410562439216484],[-119.85190420332235,34.410573319734056],[-119.85180103292197,34.41058829868076],[-119.85179874057503,34.41057752977741],[-119.85177044273665,34.410581666889385],[-119.85177273614758,34.41059243487529],[-119.85166245955232,34.41060869890611]]],[[[-119.85154582752331,34.410518132562764],[-119.85162391011086,34.41050668285556],[-119.85164642900796,34.410611206892185],[-119.85155988658249,34.41062368836092],[-119.85154733651905,34.41056541426528],[-119.85155555167552,34.410564195999285],[-119.85154582752331,34.410518132562764]]],[[[-119.85161584818343,34.41083654515652],[-119.8516158350275,34.41064350958395],[-119.85173954031411,34.41064350157963],[-119.85173954313424,34.41066883238238],[-119.85172607332977,34.41066883248161],[-119.8517260750898,34.41069264757942],[-119.85173954487807,34.41069264657882],[-119.8517395526916,34.41078779424839],[-119.85172608397555,34.41078779523234],[-119.85172608831549,34.410836538987624],[-119.85161584818343,34.41083654515652]]]]},"properties":{"BUILDING_N":"876","SHORTNAME":"","LONGNAME":"Loma Pelona Multipurpose Center"}},
{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-119.8579468874869,34.41773489387627],[-119.8579182226993,34.41773477397064],[-119.85791810443146,34.41775400678864],[-119.85784906758128,34.41775371817623],[-119.85784951377745,34.41768050584059],[-119.85787468999112,34.41768061157852],[-119.8578745241597,34.417707858344734],[-119.85791016607062,34.417708007528205],[-119.85791033189042,34.41768076076192],[-119.85801625432151,34.41768120378286],[-119.85801580827196,34.4177544161191],[-119.85794677031333,34.41775412667762],[-119.8579468874869,34.41773489387627]],[[-119.85796675873857,34.41768179795818],[-119.8579662059645,34.417681795606505],[-119.85796615591323,34.41769003861964],[-119.8579667086873,34.417690040971316],[-119.85796675873857,34.41768179795818]]],[[[-119.85831725337579,34.41773644363231],[-119.85828858858716,34.41773632381424],[-119.85828847149244,34.41775555661589],[-119.85814915186953,34.417754974517386],[-119.85814926897626,34.417735740814486],[-119.8581206041881,34.41773562095671],[-119.85812048705459,34.41775485375821],[-119.8580514491154,34.4177545652777],[-119.85805189513368,34.41768135294133],[-119.85815781756628,34.41768179583864],[-119.85815765184755,34.417709043506605],[-119.85819329267187,34.41770919262354],[-119.85819345946659,34.41768194493887],[-119.8582450556374,34.41768216155503],[-119.85824488992704,34.41770940832175],[-119.85828053183931,34.417709557396385],[-119.85828069753795,34.417682310629615],[-119.85838661997303,34.41768275332709],[-119.85838617424892,34.417755965664696],[-119.85831713630787,34.41775567733538],[-119.85831725337579,34.41773644363231]],[[-119.85833712439175,34.41768334765356],[-119.85833657270537,34.41768334528689],[-119.85833652160304,34.41769158831683],[-119.85833707437713,34.41769159066679],[-119.85833712439175,34.41768334765356]],[[-119.85810193354035,34.41768236351811],[-119.85810138076633,34.417682361167046],[-119.85810133072842,34.41769060418023],[-119.85810188350248,34.41769060653125],[-119.85810193354035,34.41768236351811]]],[[[-119.85830803037572,34.41789548421942],[-119.8583083785058,34.41783832777195],[-119.85833158631733,34.417838424804856],[-119.85833168842926,34.41782173947554],[-119.85839682328277,34.417822011865375],[-119.85839637420204,34.417895853625815],[-119.85830803037572,34.41789548421942]],[[-119.8583956598793,34.41785437832526],[-119.85838571318908,34.417854335980074],[-119.85838571035366,34.41785479407637],[-119.85839565702388,34.417854835520224],[-119.8583956598793,34.41785437832526]]],[[[-119.85841847756645,34.41789594592602],[-119.85841906045891,34.41780020935073],[-119.85845193853619,34.41780034662695],[-119.8584521183743,34.41777081027974],[-119.8584192402885,34.417770672102215],[-119.85841977439095,34.4176828917869],[-119.85850811799229,34.41768326111187],[-119.85850777017933,34.41774047436351],[-119.85848456130728,34.41774037738099],[-119.85848441677727,34.41776413252376],[-119.85850762567611,34.417764230407705],[-119.85850692238299,34.41787962993925],[-119.8584837145397,34.4178795320385],[-119.85848361247822,34.41789621826922],[-119.85841847756645,34.41789594592602]],[[-119.85842959048811,34.41786316371209],[-119.85841964379681,34.41786312136965],[-119.85841964096157,34.41786357946599],[-119.85842958763287,34.417863620907056],[-119.85842959048811,34.41786316371209]],[[-119.85843043823412,34.41772395133376],[-119.85842049157952,34.417723909892764],[-119.85842048874434,34.41772436798912],[-119.85843043539894,34.41772440943009],[-119.85843043823412,34.41772395133376]]],[[[-119.85801482067072,34.417922019984545],[-119.85790886419568,34.41792157657755],[-119.85790903001632,34.41789432981161],[-119.85787338800554,34.41789417972646],[-119.85787322219335,34.4179214273937],[-119.85784801108147,34.41792132128732],[-119.85784845729955,34.417848109853836],[-119.85791753014097,34.41784839881806],[-119.8579174118728,34.4178676316359],[-119.85794607779377,34.417867751525044],[-119.85794619496768,34.417848518723844],[-119.85801526672212,34.41784880764909],[-119.85801482067072,34.417922019984545]],[[-119.8579653512105,34.41791276832574],[-119.85796479843496,34.417912765974044],[-119.85796474838341,34.417921008987065],[-119.857965301159,34.4179210113387],[-119.8579653512105,34.41791276832574]]],[[[-119.85822984610876,34.41793391070912],[-119.85814056971077,34.41793353743552],[-119.85814063678556,34.4179225467459],[-119.85810047029662,34.41792237858545],[-119.85810051574848,34.41791505174837],[-119.85809996297291,34.417915049397344],[-119.85809991860867,34.41792237621776],[-119.85805039413049,34.41792216927524],[-119.85805087388833,34.41784895732443],[-119.85811984336276,34.417849245953754],[-119.85811972514132,34.4178684787718],[-119.85814096561762,34.41786856811273],[-119.85814101565168,34.417860325099646],[-119.85821012224201,34.417860614282034],[-119.85821000512901,34.41787984708347],[-119.85823017488299,34.41787993207574],[-119.85822984610876,34.41793391070912]],[[-119.85819080535327,34.41792470313115],[-119.8581902536653,34.417924700763855],[-119.8581902025484,34.417932943793566],[-119.85819075532407,34.41793294614423],[-119.85819080535327,34.41792470313115]]],[[[-119.85806988984515,34.41804406430111],[-119.85807000914595,34.41802483056529],[-119.85804134099537,34.41802471073877],[-119.85804122386332,34.41804394444122],[-119.8579721519269,34.41804365462942],[-119.85797236053162,34.41800959592595],[-119.85795122232064,34.41800950769333],[-119.85795107854666,34.4180332060154],[-119.85788594352951,34.41803293338622],[-119.85788604462319,34.41801624717278],[-119.85786283567501,34.418016150071296],[-119.85786318519871,34.41795899360886],[-119.85795152911052,34.4179593642406],[-119.85795146199061,34.41797035402876],[-119.85812618027859,34.41797108560158],[-119.85812624737541,34.417960095813335],[-119.85822968375908,34.41796052805197],[-119.85822935500427,34.41801450758643],[-119.8582091852177,34.41801442259403],[-119.85820906812441,34.418033656296636],[-119.85813913222597,34.418033363587305],[-119.85813906515088,34.41804435427689],[-119.85806988984515,34.41804406430111]],[[-119.857949036653,34.41796015532633],[-119.8579484849648,34.41796015295796],[-119.85794843380378,34.417968395086184],[-119.85794898657969,34.417968397437896],[-119.857949036653,34.41796015532633]],[[-119.85786603115598,34.41796805065569],[-119.85786608121735,34.41795980764275],[-119.85786552844151,34.41795980529065],[-119.85786547838008,34.41796804830355],[-119.85786603115598,34.41796805065569]]],[[[-119.85830643654549,34.41815722183848],[-119.85830713903103,34.4180418223268],[-119.85833034691932,34.41804192026136],[-119.85833049256127,34.41801816420112],[-119.85830728361204,34.418018067184626],[-119.85830763265153,34.417960853917904],[-119.85839597545946,34.417961223341244],[-119.85839544133022,34.418049003654914],[-119.85836256315483,34.41804886636338],[-119.85836238330452,34.4180784036113],[-119.85839526149155,34.41807854090285],[-119.85839467856977,34.41817427747636],[-119.85832954235315,34.418174005102074],[-119.85832964446595,34.41815731977312],[-119.85830643654549,34.41815722183848]],[[-119.85839391120143,34.41814144558151],[-119.858383964497,34.41814140413754],[-119.85838396164148,34.4181418613325],[-119.85839390836607,34.418141903677856],[-119.85839391120143,34.41814144558151]],[[-119.85839475900987,34.41800223320588],[-119.85838481232209,34.418002191761985],[-119.85838480948665,34.418002649858295],[-119.85839475617449,34.418002691302235],[-119.85839475900987,34.41800223320588]]],[[[-119.85841638967956,34.418238709675876],[-119.858416517133,34.41821784557841],[-119.85844939537513,34.41821798285532],[-119.85844957521496,34.4181884465089],[-119.85841669696438,34.41818830833071],[-119.8584173649044,34.41807863320328],[-119.85845024309165,34.418078770479944],[-119.85845042293087,34.41804923413329],[-119.8584175447553,34.418049096856656],[-119.85841807886132,34.4179613165429],[-119.85843128233773,34.417961371195354],[-119.85850642275794,34.41796168586914],[-119.85850607494267,34.418018899119765],[-119.85848286599303,34.418018802136885],[-119.85848272146207,34.41804255727924],[-119.85850593041836,34.418042654262166],[-119.85850522729999,34.41815811059464],[-119.85848201831158,34.41815801361162],[-119.85848187378012,34.41818176875381],[-119.85850508279528,34.4181818666382],[-119.85850473387038,34.41823907900335],[-119.85841638967956,34.418238709675876]],[[-119.85842789496756,34.41814158756371],[-119.85841794826308,34.41814154612249],[-119.85841794542789,34.418142004218836],[-119.85842789213237,34.418142045660005],[-119.85842789496756,34.41814158756371]],[[-119.8584287427192,34.41800237518783],[-119.85841879603139,34.41800233374669],[-119.85841879319614,34.418002791843016],[-119.858428739884,34.41800283328414],[-119.8584287427192,34.41800237518783]]],[[[-119.85841619328058,34.418270966640904],[-119.8584163783386,34.41824054206117],[-119.85846113802812,34.41824072899966],[-119.85846095298646,34.41827115357948],[-119.85841619328058,34.418270966640904]]],[[[-119.85832480982575,34.418299062031515],[-119.85828384881323,34.41829889077483],[-119.85828373171668,34.41831812357582],[-119.8582147629411,34.418317835023025],[-119.858215208839,34.41824462359],[-119.85839410725559,34.41824537188921],[-119.85839366151494,34.41831858332284],[-119.8583246927386,34.41831829483256],[-119.85832480982575,34.418299062031515]],[[-119.85834461242773,34.418245966202036],[-119.85834405964994,34.418245963852065],[-119.85834400961562,34.41825420596369],[-119.85834456130578,34.418254208330296],[-119.85834461242773,34.418245966202036]],[[-119.85826519647632,34.418253877128976],[-119.85826524649833,34.41824563411602],[-119.85826469480826,34.41824563174909],[-119.85826464478616,34.418253874761994],[-119.85826519647632,34.418253877128976]]]]},"properties":{"BUILDING_N":"845","SHORTNAME":"","LONGNAME":"San Clemente Encino 845 Apartments"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-119.86729141150416,34.418482441467525],[-119.86729178840483,34.41842232965226],[-119.86729553620178,34.41842235490291],[-119.86729562385507,34.41840850193975],[-119.86726139529982,34.41840836891417],[-119.8672617650215,34.41835089642794],[-119.86768928773867,34.418352805344846],[-119.86768940163395,34.41833716574724],[-119.8677231984771,34.4183373107102],[-119.86772869774026,34.4177129096903],[-119.86836966769538,34.41771677836637],[-119.8683693689257,34.41774929576722],[-119.86836801526802,34.41774928957091],[-119.86836799969635,34.41775184517356],[-119.86876448578441,34.41775406428614],[-119.86876391530602,34.417824704425826],[-119.86879432967211,34.41782486874708],[-119.86879386958083,34.41788272766636],[-119.86836663788469,34.4178803511257],[-119.86836653459083,34.417896457633525],[-119.86821067965188,34.4178955927009],[-119.86820914251517,34.41807101037488],[-119.86836463474869,34.41807194041313],[-119.86836266532035,34.418296124028664],[-119.86828926476275,34.4182956885666],[-119.86828806506226,34.41843293110168],[-119.86804341507057,34.418431450092775],[-119.86804314477475,34.41847111286857],[-119.86777389452511,34.41846990022279],[-119.8677736777176,34.41850161926923],[-119.86768777436721,34.418501238034345],[-119.86768789117741,34.4184842242311],[-119.86729141150416,34.418482441467525]],[[-119.86803919395918,34.41812045788439],[-119.86798021384175,34.41811980011936],[-119.86797815693919,34.41824397426776],[-119.86803713775106,34.41824465907486],[-119.86803919395918,34.41812045788439]]]},"properties":{"BUILDING_N":"860","SHORTNAME":"","LONGNAME":"Santa Catalina Residence Hall"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-119.87115750661047,34.41816171516677],[-119.87125955693821,34.418161981855704],[-119.87125947898427,34.418180644249055],[-119.87124667764411,34.418180621756576],[-119.8712466004696,34.41820527580828],[-119.87125940350874,34.41820532532504],[-119.87125907119375,34.41829388184093],[-119.87124679999053,34.41829382321637],[-119.87124656679997,34.41834843622358],[-119.87125883847116,34.418348466888965],[-119.87125853185348,34.41843666594188],[-119.87124645921293,34.418436632205335],[-119.87124634431923,34.41846101182593],[-119.8712583832253,34.418461045181324],[-119.87125830798423,34.41848132965664],[-119.87115629098302,34.41848106244645],[-119.87115750661047,34.41816171516677]]]},"properties":{"BUILDING_N":"707","SHORTNAME":"","LONGNAME":"West Apartment 707"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-119.84340153501677,34.41602907315156],[-119.84340118890618,34.415930991333965],[-119.84360021994323,34.41593052211971],[-119.84360053365879,34.416028604432796],[-119.84340153501677,34.41602907315156]]]},"properties":{"BUILDING_N":"232","SHORTNAME":"","LONGNAME":"Building 232"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-119.8706952298087,34.418706475653224],[-119.8710384353539,34.41870766799861],[-119.87103805689814,34.41878086147747],[-119.8706948505913,34.418779697090244],[-119.8706952298087,34.418706475653224]]]},"properties":{"BUILDING_N":"709","SHORTNAME":"","LONGNAME":"West Apartment 709"}},
]};

var directionsDisplay;
var directionsService;
var map;

function initMap() {
	
  	map = new google.maps.Map(document.getElementById('gaucho-guide-map'), {
	    center: {lat: 34.4126452, lng: -119.8471294},
	    zoom: 16
  	});
  	directionsDisplay = new google.maps.DirectionsRenderer();
	directionsService = new google.maps.DirectionsService();
  	directionsDisplay.setMap(map);

}

var geoSuccess = function(position) {

	// Do magic with location
	
	start = "Student Resource Building, UC Santa Barbara";
	end = $("#find-text").val() + " University of California, Santa Barbara";


	var request = {
	    origin: start,
	    destination: end,
	    travelMode: 'WALKING'
  	};
  	directionsService.route(request, function(result, status) {
	    if (status === 'OK') {
	    	$("#error-message").text("");
	      	directionsDisplay.setDirections(result);
	    }
	    if(status === 'NOT_FOUND'){
	    	$("#error-message").text("Can not find that destination");
	    }
  	});
};
  
var geoError = function(error) {
	alert("Fail!");
};

function GetDirections(){
	var currentLocation = navigator.geolocation.getCurrentPosition(geoSuccess, geoError);
};
	
function create_marker(landmark){
    var position = new google.maps.LatLng({lat: landmark.lat, lng: landmark.lng});
    var marker_image = 'crt_files/static/img/video_icon.png';

    var marker = new google.maps.Marker({
        position: position,
        map: map,
        title: landmark.name,
        icon: marker_image
    });

    marker.addListener('click', function() {
        load_video(landmark.vid_url);
        load_info(landmark.name, landmark.info);
    });
}